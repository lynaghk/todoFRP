
(function(){var impl={};(function(){var TEXTB;var deepDynamicUpdate;var deepStaticUpdate;var extractDomFieldOnEventE;var extractEventsE;var extractValueOnEventE;var extractValueStaticB;var i;var insertDom;var insertDomB;var insertDomE;var insertDomInternal;var insertValue;var insertValueB;var insertValueE;var isListening;var module=this;var slice=function(arr,start,stop){var i,len=arr.length,r=[];if(!stop){stop=len;}
if(stop<0){stop=len+stop;}
if(start<0){start=len-start;}
if(stop<start){i=start;start=stop;stop=i;}
for(i=0;i<stop-start;i++){r[i]=arr[start+i];}
return r;}
var isEqual=function(a,b){return(a==b)||((((typeof(a)=='number')&&isNaN(a))||a=='NaN')&&(((typeof(b)=='number')&&isNaN(b))||b=='NaN'));};var forEach=function(fn,arr){for(var i=0;i<arr.length;i++){fn(arr[i]);}};var member=function(elt,lst){for(var i=0;i<lst.length;i++){if(isEqual(lst[i],elt)){return true;}}
return false;};var zip=function(arrays){if(arrays.length==0)return[];var ret=[];for(var i=0;i<arrays[0].length;i++){ret.push([]);for(var j=0;j<arrays.length;j++)
ret[i].push(arrays[j][i]);}
return ret;}
var map=function(fn){var arrays=slice(arguments,1);if(arrays.length===0){return[];}
else if(arrays.length===1){var ret=[];for(var i=0;i<arrays[0].length;i++){ret.push(fn(arrays[0][i]));}
return ret;}
else{var ret=zip(arrays);var o=new Object();for(var i=0;i<ret.length;i++){ret[i]=fn.apply(o,ret[i]);}
return ret;}};var filter=function(predFn,arr){var res=[];for(var i=0;i<arr.length;i++){if(predFn(arr[i])){res.push(arr[i]);}}
return res;};var fold=function(fn,init){var lists=slice(arguments,2);if(lists.length===0){return init;}
else if(lists.length===1){var acc=init;for(var i=0;i<lists[0].length;i++){acc=fn(lists[0][i],acc);}
return acc;}
else{var acc=init;for(var i=0;i<lists[0].length;i++){var args=map(function(lst){return lst[i];},lists);args.push(acc);acc=fn.apply({},args);}
return acc;}};var foldR=function(fn,init){var lists=slice(arguments,2);if(lists.length===0){return init;}
else if(lists.length===1){var acc=init;for(var i=lists[0].length-1;i>-1;i--)
acc=fn(lists[0][i],acc);return acc;}
else{var acc=init;for(var i=lists[0].length-1;i>-1;i--){var args=map(function(lst){return lst[i];},lists);args.push(acc);acc=fn.apply({},args);}
return acc;}};var doNotPropagate={};var Pulse=function(stamp,value){this.stamp=stamp;this.value=value;};var PQ=function(){var ctx=this;ctx.val=[];this.insert=function(kv){ctx.val.push(kv);var kvpos=ctx.val.length-1;while(kvpos>0&&kv.k<ctx.val[Math.floor((kvpos-1)/2)].k){var oldpos=kvpos;kvpos=Math.floor((kvpos-1)/2);ctx.val[oldpos]=ctx.val[kvpos];ctx.val[kvpos]=kv;}};this.isEmpty=function(){return ctx.val.length===0;};this.pop=function(){if(ctx.val.length==1){return ctx.val.pop();}
var ret=ctx.val.shift();ctx.val.unshift(ctx.val.pop());var kvpos=0;var kv=ctx.val[0];while(1){var leftChild=(kvpos*2+1<ctx.val.length?ctx.val[kvpos*2+1].k:kv.k+1);var rightChild=(kvpos*2+2<ctx.val.length?ctx.val[kvpos*2+2].k:kv.k+1);if(leftChild>kv.k&&rightChild>kv.k)
break;if(leftChild<rightChild){ctx.val[kvpos]=ctx.val[kvpos*2+1];ctx.val[kvpos*2+1]=kv;kvpos=kvpos*2+1;}
else{ctx.val[kvpos]=ctx.val[kvpos*2+2];ctx.val[kvpos*2+2]=kv;kvpos=kvpos*2+2;}}
return ret;};};var lastRank=0;var stamp=1;var nextStamp=function(){return++stamp;};var propagatePulse=function(pulse,node){var queue=new PQ();queue.insert({k:node.rank,n:node,v:pulse});var len=1;while(len){var qv=queue.pop();len--;var nextPulse=qv.n.updater(new Pulse(qv.v.stamp,qv.v.value));var weaklyHeld=true;if(nextPulse!=doNotPropagate){for(i=0;i<qv.n.sendsTo.length;i++){weaklyHeld=weaklyHeld&&qv.n.sendsTo[i].weaklyHeld;len++;queue.insert({k:qv.n.sendsTo[i].rank,n:qv.n.sendsTo[i],v:nextPulse});}
if(qv.n.sendsTo.length>0&&weaklyHeld){qv.n.weaklyHeld=true;}}}};var EventStream=function(nodes,updater){this.updater=updater;this.sendsTo=[];this.weaklyHeld=false;for(var i=0;i<nodes.length;i++){nodes[i].attachListener(this);}
this.rank=++lastRank;};EventStream.prototype=new Object();var createNode=function(nodes,updater){return new EventStream(nodes,updater);};var genericAttachListener=function(node,dependent){node.sendsTo.push(dependent);if(node.rank>dependent.rank){var lowest=lastRank+1;var q=[dependent];while(q.length){var cur=q.splice(0,1)[0];cur.rank=++lastRank;q=q.concat(cur.sendsTo);}}};var genericRemoveListener=function(node,dependent,isWeakReference){var foundSending=false;for(var i=0;i<node.sendsTo.length&&!foundSending;i++){if(node.sendsTo[i]==dependent){node.sendsTo.splice(i,1);foundSending=true;}}
if(isWeakReference===true&&node.sendsTo.length==0){node.weaklyHeld=true;}
return foundSending;};EventStream.prototype.attachListener=function(dependent){if(!(dependent instanceof EventStream)){throw'attachListener: expected an EventStream';}
genericAttachListener(this,dependent);};EventStream.prototype.removeListener=function(dependent,isWeak){if(!(dependent instanceof EventStream)){throw'removeListener: expected an EventStream';}
genericRemoveListener(this,dependent,isWeak);};var internalE=function(dependsOn){return createNode(dependsOn||[],function(pulse){return pulse;});}
var zeroE=function(){return createNode([],function(pulse){throw('zeroE : received a value; zeroE should not receive a value; the value was '+pulse.value);});};var oneE=function(val){var sent=false;var evt=createNode([],function(pulse){if(sent){throw('oneE : received an extra value');}
sent=true;return pulse;});window.setTimeout(function(){sendEvent(evt,val);},0);return evt;};var mergeE=function(){if(arguments.length==0){return zeroE();}
else{var deps=slice(arguments,0);return internalE(deps);}};EventStream.prototype.mergeE=function(){var deps=slice(arguments,0);deps.push(this);return internalE(deps);};EventStream.prototype.constantE=function(constantValue){return createNode([this],function(pulse){pulse.value=constantValue;return pulse;});};var constantE=function(e,v){return e.constantE(v);};var Behavior=function(event,init,updater){if(!(event instanceof EventStream)){throw'Behavior: expected event as second arg';}
var behave=this;this.last=init;this.underlyingRaw=event;this.underlying=createNode([event],updater?function(p){behave.last=updater(p.value);p.value=behave.last;return p;}:function(p){behave.last=p.value;return p});};Behavior.prototype=new Object();var receiverE=function(){var evt=internalE();evt.sendEvent=function(value){propagatePulse(new Pulse(nextStamp(),value),evt);};return evt;};var sendEvent=function(node,value){if(!(node instanceof EventStream)){throw'sendEvent: expected Event as first arg';}
propagatePulse(new Pulse(nextStamp(),value),node);};EventStream.prototype.bindE=function(k){var m=this;var prevE=false;var outE=createNode([],function(pulse){return pulse;});outE.name="bind outE";var inE=createNode([m],function(pulse){if(prevE){prevE.removeListener(outE,true);}
prevE=k(pulse.value);if(prevE instanceof EventStream){prevE.attachListener(outE);}
else{throw"bindE : expected EventStream";}
return doNotPropagate;});inE.name="bind inE";return outE;};EventStream.prototype.mapE=function(f){if(!(f instanceof Function)){throw('mapE : expected a function as the first argument; received '+f);};return createNode([this],function(pulse){pulse.value=f(pulse.value);return pulse;});};EventStream.prototype.notE=function(){return this.mapE(function(v){return!v;});};var notE=function(e){return e.notE();};EventStream.prototype.filterE=function(pred){if(!(pred instanceof Function)){throw('filterE : expected predicate; received '+pred);};return createNode([this],function(pulse){return pred(pulse.value)?pulse:doNotPropagate;});};var filterE=function(e,p){return e.filterE(p);};EventStream.prototype.onceE=function(){var done=false;return createNode([this],function(pulse){if(!done){done=true;return pulse;}
else{return doNotPropagate;}});};var onceE=function(e){return e.onceE();};EventStream.prototype.skipFirstE=function(){var skipped=false;return createNode([this],function(pulse){if(skipped)
{return pulse;}
else
{skipped=true;return doNotPropagate;}});};var skipFirstE=function(e){return e.skipFirstE();};EventStream.prototype.collectE=function(init,fold){var acc=init;return this.mapE(function(n){var next=fold(n,acc);acc=next;return next;});};var collectE=function(e,i,f){return e.collectE(i,f);};EventStream.prototype.switchE=function(){return this.bindE(function(v){return v;});};var recE=function(fn){var inE=receiverE();var outE=fn(inE);outE.mapE(function(x){inE.sendEvent(x)});return outE;}
var switchE=function(e){return e.switchE();};EventStream.prototype.ifE=function(thenE,elseE){var testStamp=-1;var testValue=false;createNode([this],function(pulse){testStamp=pulse.stamp;testValue=pulse.value;return doNotPropagate;});return mergeE(createNode([thenE],function(pulse){if(testValue&&(testStamp==pulse.stamp)){send(pulse);}}),createNode([elseE],function(pulse){if(!testValue&&(testStamp==pulse.stamp)){send(pulse);}}));};var ifE=function(test,thenE,elseE){if(test instanceof EventStream)
{return test.ifE(thenE,elseE);}
else
{return test?thenE:elseE;}};var andE=function(){var nodes=slice(arguments,0);var acc=(nodes.length>0)?nodes[nodes.length-1]:oneE(true);for(var i=nodes.length-2;i>-1;i--){acc=ifE(nodes[i],acc,nodes[i].constantE(false));}
return acc;};EventStream.prototype.andE=function(){var deps=[this].concat(slice(arguments,0));return andE.apply(this,deps);};var orE=function(){var nodes=slice(arguments,0);var acc=(nodes.length>2)?nodes[nodes.length-1]:oneE(false);for(var i=nodes.length-2;i>-1;i--){acc=ifE(nodes[i],nodes[i],acc);}
return acc;};EventStream.prototype.orE=function(){var deps=[this].concat(slice(arguments,0));return orE.apply(this,deps);};var delayStaticE=function(event,time){var resE=internalE();createNode([event],function(p){setTimeout(function(){sendEvent(resE,p.value);},time);return doNotPropagate;});return resE;};EventStream.prototype.delayE=function(time){var event=this;if(time instanceof Behavior){var receiverEE=internalE();var link={from:event,towards:delayStaticE(event,valueNow(time))};var switcherE=createNode([changes(time)],function(p){link.from.removeListener(link.towards);link={from:event,towards:delayStaticE(event,p.value)};sendEvent(receiverEE,link.towards);return doNotPropagate;});var resE=receiverEE.switchE();sendEvent(switcherE,valueNow(time));return resE;}else{return delayStaticE(event,time);}};var delayE=function(sourceE,interval){return sourceE.delayE(interval);};var mapE=function(fn){var valsOrNodes=slice(arguments,0);var selectors=[];var selectI=0;var nodes=[];for(var i=0;i<valsOrNodes.length;i++){if(valsOrNodes[i]instanceof EventStream){nodes.push(valsOrNodes[i]);selectors.push((function(ii){return function(realArgs){return realArgs[ii];};})(selectI));selectI++;}else{selectors.push((function(aa){return function(){return aa;};})(valsOrNodes[i]));}}
var context=this;var nofnodes=slice(selectors,1);if(nodes.length===0){return oneE(fn.apply(context,valsOrNodes));}else if((nodes.length===1)&&(fn instanceof Function)){return nodes[0].mapE(function(){var args=arguments;return fn.apply(context,map(function(s){return s(args);},nofnodes));});}else if(nodes.length===1){return fn.mapE(function(v){var args=arguments;return v.apply(context,map(function(s){return s(args);},nofnodes));});}else if(fn instanceof Function){return createTimeSyncNode(nodes).mapE(function(arr){return fn.apply(this,map(function(s){return s(arr);},nofnodes));});}else if(fn instanceof EventStream){return createTimeSyncNode(nodes).mapE(function(arr){return arr[0].apply(this,map(function(s){return s(arr);},nofnodes));});}else{throw'unknown mapE case';}};EventStream.prototype.snapshotE=function(valueB){return createNode([this],function(pulse){pulse.value=valueNow(valueB);return pulse;});};var snapshotE=function(triggerE,valueB){return triggerE.snapshotE(valueB);};EventStream.prototype.filterRepeatsE=function(optStart){var hadFirst=optStart===undefined?false:true;var prev=optStart;return this.filterE(function(v){if(!hadFirst||!(isEqual(prev,v))){hadFirst=true;prev=v;return true;}
else{return false;}});};var filterRepeatsE=function(sourceE,optStart){return sourceE.filterRepeatsE(optStart);};var calmStaticE=function(triggerE,time){var out=internalE();createNode([triggerE],function(){var towards=null;return function(p){if(towards!==null){clearTimeout(towards);}
towards=setTimeout(function(){towards=null;sendEvent(out,p.value)},time);return doNotPropagate;};}());return out;};EventStream.prototype.calmE=function(time){if(time instanceof Behavior){var out=internalE();createNode([this],function(){var towards=null;return function(p){if(towards!==null){clearTimeout(towards);}
towards=setTimeout(function(){towards=null;sendEvent(out,p.value)},valueNow(time));return doNotPropagate;};}());return out;}else{return calmStaticE(this,time);}};var calmE=function(sourceE,interval){return sourceE.calmE(interval);};EventStream.prototype.blindE=function(time){return createNode([this],function(){var intervalFn=time instanceof Behavior?function(){return valueNow(time);}:function(){return time;};var lastSent=(new Date()).getTime()-intervalFn()-1;return function(p){var curTime=(new Date()).getTime();if(curTime-lastSent>intervalFn()){lastSent=curTime;return p;}
else{return doNotPropagate;}};}());};var blindE=function(sourceE,interval){return sourceE.blindE(interval);};EventStream.prototype.startsWith=function(init){return new Behavior(this,init);};var startsWith=function(e,init){if(!(e instanceof EventStream)){throw'startsWith: expected EventStream; received '+e;}
return e.startsWith(init);};Behavior.prototype.valueNow=function(){return this.last;};var valueNow=function(behavior){return behavior.valueNow();};Behavior.prototype.changes=function(){return this.underlying;};var changes=function(behave){return behave.changes();}
Behavior.prototype.switchB=function(){var behaviourCreatorsB=this;var init=valueNow(behaviourCreatorsB);var prevSourceE=null;var receiverE=new internalE();var makerE=createNode([changes(behaviourCreatorsB)],function(p){if(!(p.value instanceof Behavior)){throw'switchB: expected Behavior as value of Behavior of first argument';}
if(prevSourceE!=null){prevSourceE.removeListener(receiverE);}
prevSourceE=changes(p.value);prevSourceE.attachListener(receiverE);sendEvent(receiverE,valueNow(p.value));return doNotPropagate;});if(init instanceof Behavior){sendEvent(makerE,init);}
return startsWith(receiverE,init instanceof Behavior?valueNow(init):init);};var switchB=function(b){return b.switchB();};var timerB=function(interval){return startsWith(timerE(interval),(new Date()).getTime());};var delayStaticB=function(triggerB,time,init){return startsWith(delayStaticE(changes(triggerB),time),init);};Behavior.prototype.delayB=function(time,init){var triggerB=this;if(time instanceof Behavior){return startsWith(delayE(changes(triggerB),time),arguments.length>3?init:valueNow(triggerB));}else{return delayStaticB(triggerB,time,arguments.length>3?init:valueNow(triggerB));}};var delayB=function(srcB,timeB,init){return srcB.delayB(timeB,init);};Behavior.prototype.sendBehavior=function(val){sendEvent(this.underlyingRaw,val);};Behavior.prototype.sendBehavior=Behavior.prototype.sendBehavior;var sendBehavior=function(b,v){b.sendBehavior(v);};Behavior.prototype.ifB=function(trueB,falseB){var testB=this;if(!(trueB instanceof Behavior)){trueB=constantB(trueB);}
if(!(falseB instanceof Behavior)){falseB=constantB(falseB);}
return liftB(function(te,t,f){return te?t:f;},testB,trueB,falseB);};var ifB=function(test,cons,altr){if(!(test instanceof Behavior)){test=constantB(test);};return test.ifB(cons,altr);};var condB=function(){var pairs=slice(arguments,0);return liftB.apply({},[function(){for(var i=0;i<pairs.length;i++){if(arguments[i])return arguments[pairs.length+i];}
return undefined;}].concat(map(function(pair){return pair[0];},pairs).concat(map(function(pair){return pair[1];},pairs))));};var constantB=function(val){return new Behavior(internalE(),val);};var liftB=function(fn){var args=slice(arguments,1);var constituentsE=map(changes,filter(function(v){return v instanceof Behavior;},arguments));var getCur=function(v){return v instanceof Behavior?v.last:v;};var ctx=this;var getRes=function(){return getCur(fn).apply(ctx,map(getCur,args));};if(constituentsE.length==1){return new Behavior(constituentsE[0],getRes(),getRes);}
var prevStamp=-1;var mid=createNode(constituentsE,function(p){if(p.stamp!=prevStamp){prevStamp=p.stamp;return p;}
else{return doNotPropagate;}});return new Behavior(mid,getRes(),getRes);};Behavior.prototype.liftB=function(){var args=slice(arguments,0).concat([this]);return liftB.apply(this,args);};var andB=function(){return liftB.apply({},[function(){for(var i=0;i<arguments.length;i++){if(!arguments[i])return false;}
return true;}].concat(slice(arguments,0)));};Behavior.prototype.andB=function(){return andB([this].concat(arguments));};var orB=function(){return liftB.apply({},[function(){for(var i=0;i<arguments.length;i++){if(arguments[i])return true;}
return false;}].concat(slice(arguments,0)));};Behavior.prototype.orB=function(){return orB([this].concat(arguments));};Behavior.prototype.notB=function(){return this.liftB(function(v){return!v;});};var notB=function(b){return b.notB();};Behavior.prototype.blindB=function(intervalB){return changes(this).blindE(intervalB).startsWith(this.valueNow());};var blindB=function(srcB,intervalB){return srcB.blindB(intervalB);};Behavior.prototype.calmB=function(intervalB){return this.changes().calmE(intervalB).startsWith(this.valueNow());};var calmB=function(srcB,intervalB){return srcB.calmB(intervalB);};var addEvent=function(obj,evType,fn){if(obj.addEventListener){obj.addEventListener(evType,fn,false);return true;}else if(obj.attachEvent){return obj.attachEvent("on"+evType,fn);}else{return false;}};var getElementsByClass=function(searchClass,node,tag){var classElements=[];if((node===null)||(node===undefined)){node=document;}
if((tag===null)||(tag===undefined)){tag='*';}
var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(var i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements.push(els[i]);}}
return classElements;};var swapDom=function(replaceMe,withMe){if((replaceMe===null)||(replaceMe===undefined)){throw('swapDom: expected dom node or id, received: '+replaceMe);}
var replaceMeD=getObj(replaceMe);if(!(replaceMeD.nodeType>0)){throw('swapDom expected a Dom node as first arg, received '+replaceMeD);}
if(withMe){var withMeD=getObj(withMe);if(!(withMeD.nodeType>0)){throw'swapDom: can only swap with a DOM object';}
try{if(replaceMeD.parentNode==null){return withMeD;}
if(withMeD!=replaceMeD)replaceMeD.parentNode.replaceChild(withMeD,replaceMeD);}catch(e){throw('swapDom error in replace call: withMeD: '+withMeD+', replaceMe Parent: '+replaceMeD+', '+e+', parent: '+replaceMeD.parentNode);}}else{replaceMeD.parentNode.removeChild(replaceMeD);}
return replaceMeD;};var getObj=function(name){if(typeof(name)=='object'){return name;}
else if((typeof(name)=='null')||(typeof(name)=='undefined')){throw'getObj: expects a Dom obj or Dom id as first arg';}else{var res=document.getElementById?document.getElementById(name):document.all?document.all[name]:document.layers?document.layers[name]:(function(){throw'getObj: flapjax: cannot access object';})();if((res===null)||(res===undefined)){throw('getObj: no obj to get: '+name);}
return res;}};var $=getObj;var getMostDom=function(domObj,indices){var acc=getObj(domObj);if((indices===null)||(indices===undefined)||(indices.length<1)){return acc;}else{for(var i=0;i<indices.length-1;i++){acc=acc[indices[i]];}
return acc;}};var getDomVal=function(domObj,indices){var val=getMostDom(domObj,indices);if(indices&&indices.length>0){val=val[indices[indices.length-1]];}
return val;};var ___timerID=0;var __getTimerId=function(){return++___timerID;};var timerDisablers=[];var disableTimerNode=function(node){timerDisablers[node.__timerId]();};var disableTimer=function(v){if(v instanceof Behavior){disableTimerNode(v.underlyingRaw);}else if(v instanceof EventStream){disableTimerNode(v);}};var createTimerNodeStatic=function(interval){var primEventE=internalE();primEventE.__timerId=__getTimerId();var listener=function(evt){if(!primEventE.weaklyHeld){sendEvent(primEventE,(new Date()).getTime());}
else{clearInterval(timer);isListening=false;}
return true;};var timer=setInterval(listener,interval);timerDisablers[primEventE.__timerId]=function(){clearInterval(timer);};return primEventE;};var timerE=function(interval){if(interval instanceof Behavior){var receiverE=internalE();var res=receiverE.switchE();var prevE=createTimerNodeStatic(valueNow(interval));sendEvent(receiverE,prevE);createNode([changes(interval)],function(p){disableTimerNode(prevE);prevE=createTimerNodeStatic(p.value);sendEvent(receiverE,prevE);return doNotPropagate;});res.__timerId=__getTimerId();timerDisablers[res.__timerId]=function(){disableTimerNode[prevE]();return;};return res;}else{return createTimerNodeStatic(interval);}};var deepEach=function(arr,f){for(var i=0;i<arr.length;i++){if(arr[i]instanceof Array){deepEach(arr[i],f);}
else{f(arr[i]);}}};var mapWithKeys=function(obj,f){for(var ix in obj){if(!(Object.prototype&&Object.prototype[ix]==obj[ix])){f(ix,obj[ix]);}}}
var insertAfter=function(parent,newChild,refChild){if(typeof refChild!="undefined"&&refChild.nextSibling){parent.insertBefore(newChild,refChild.nextSibling);}
else{parent.appendChild(newChild);}};var swapChildren=function(parent,existingChildren,newChildren){var end=Math.min(existingChildren.length,newChildren.length);var i;for(i=0;i<end;i++){parent.replaceChild(newChildren[i],existingChildren[i]);}
var lastInsertedChild=existingChildren[i-1];if(end<existingChildren.length){for(i=end;i<existingChildren.length;i++){parent.removeChild(existingChildren[i]);}}
else if(end<newChildren.length){for(i=end;i<newChildren.length;i++){insertAfter(parent,newChildren[i],newChildren[i-1]);}}};var elementize=function(maybeElement){return(maybeElement.nodeType>0)?maybeElement:document.createTextNode(maybeElement.toString());};var staticEnstyle=function(obj,prop,val){if(val instanceof Object){mapWithKeys(val,function(k,v){enstyle(obj[prop],k,v);});}
else{obj[prop]=val;}};var dynamicEnstyle=function(obj,prop,val){if(val instanceof Behavior){staticEnstyle(obj,prop,val.valueNow());val.liftB(function(v){staticEnstyle(obj,prop,v);});}
else if(val instanceof Object){mapWithKeys(val,function(k,v){dynamicEnstyle(obj[prop],k,v);});}
else{obj[prop]=val;}};var makeTagB=function(tagName){return function(){var attribs,children;if(typeof(arguments[0])=="object"&&!(arguments[0].nodeType>0||arguments[0]instanceof Behavior||arguments[0]instanceof Array)){attribs=arguments[0];children=slice(arguments,1);}
else{attribs={};children=slice(arguments,0);}
var elt=document.createElement(tagName);mapWithKeys(attribs,function(name,val){if(val instanceof Behavior){elt[name]=val.valueNow();val.liftB(function(v){staticEnstyle(elt,name,v);});}
else{dynamicEnstyle(elt,name,val);}});deepEach(children,function(child){if(child instanceof Behavior){var lastVal=child.valueNow();if(lastVal instanceof Array){lastVal=map(elementize,lastVal);forEach(function(dynChild){elt.appendChild(dynChild);},lastVal);child.liftB(function(currentVal){currentVal=map(elementize,currentVal);swapChildren(elt,lastVal,currentVal);lastVal=currentVal;});}
else{lastVal=elementize(lastVal);elt.appendChild(lastVal);var lastValIx=elt.childNodes.length-1;child.liftB(function(currentVal){currentVal=elementize(currentVal);if(lastVal.parentNode!=elt){elt.appendChild(currentVal)}
else{elt.replaceChild(currentVal,lastVal)}
lastVal=currentVal;});}}
else{elt.appendChild(elementize(child));}});return elt;}};var generatedTags=["a","b","blockquote","br","button","canvas","div","fieldset","form","font","h1","h2","h3","h4","hr","img","iframe","input","label","legend","li","ol","optgroup","option","p","pre","select","span","strong","table","tbody","td","textarea","tfoot","th","thead","tr","tt","ul"];forEach(function(tagName){this[tagName.toUpperCase()]=makeTagB(tagName);},generatedTags);TEXTB=function(strB){if(!(strB instanceof Behavior)){strB=constantB(strB);}
return startsWith(changes(strB).mapE(function(txt){return document.createTextNode(txt);}),document.createTextNode(valueNow(strB)));};var TEXT=function(str){return document.createTextNode(str);};var tagRec=function(eventNames,maker){if(!(eventNames instanceof Array)){throw'tagRec: expected array of event names as first arg';}
if(!(maker instanceof Function)){throw'tagRec: expected function as second arg';}
var numEvents=eventNames.length;var receivers=[];var i;for(i=0;i<numEvents;i++){receivers.push(internalE());}
var elt=maker.apply(this,receivers);for(i=0;i<numEvents;i++){extractEventE(elt,eventNames[i]).attachListener(receivers[i]);}
return elt;};var extractEventStaticE=function(domObj,eventName){if(!eventName){throw'extractEventE : no event name specified';}
if(!domObj){throw'extractEventE : no DOM element specified';}
domObj=getObj(domObj);var primEventE=internalE();var isListening=false;var listener=function(evt){if(!primEventE.weaklyHeld){sendEvent(primEventE,evt||window.event);}
else{domObj.removeEventListener(eventName,listener,false);isListening=false;}
return true;};primEventE.attachListener=function(dependent){if(!isListening){addEvent(domObj,eventName,listener);isListening=true;}
genericAttachListener(primEventE,dependent);};primEventE.removeListener=function(dependent){genericAttachListener(primEventE,dependent);if(isListening&&(primEventE.sendsTo.length==0)){domObj.removeEventListener(eventName,listener,false);isListening=false;}};return primEventE;};var extractEventE=function(domB,eventName){if(!(domB instanceof Behavior)){return extractEventStaticE(domB,eventName);}
else{var domE=domB.changes();var eventEE=domE.mapE(function(dom){return extractEventStaticE(dom,eventName);});var resultE=eventEE.switchE();sendEvent(domE,domB.valueNow());return resultE;};};var $E=extractEventE;extractEventsE=function(domObj){var eventNames=slice(arguments,1);var events=map(function(eventName){return extractEventE(domObj,eventName);},eventNames.length===0?[]:eventNames);return mergeE.apply(this,events);};extractValueOnEventE=function(triggerE,domObj){if(!(triggerE instanceof EventStream)){throw'extractValueOnEventE: expected Event as first arg';}
return changes(extractValueOnEventB.apply(this,arguments));};extractDomFieldOnEventE=function(triggerE,domObj){if(!(triggerE instanceof EventStream)){throw'extractDomFieldOnEventE: expected Event as first arg';}
var indices=slice(arguments,2);var res=triggerE.mapE(function(){return getDomVal(domObj,indices);});return res;};var extractValueE=function(domObj){return changes(extractValueB.apply(this,arguments));};var extractValueOnEventB=function(triggerE,domObj){return extractValueStaticB(domObj,triggerE);};extractValueStaticB=function(domObj,triggerE){var objD;try{objD=getObj(domObj);if(typeof(domObj)=='string'&&objD.id!=domObj){throw'Make a radio group';}}catch(e){objD={type:'radio-group',name:domObj};}
var getter;var result;switch(objD.type){case'checkbox':result=startsWith(filterRepeatsE(extractDomFieldOnEventE(triggerE?triggerE:extractEventsE(objD,'click','keyup','change'),objD,'checked'),objD.checked),objD.checked);break;case'select-one':getter=function(_){return objD.selectedIndex>-1?(objD.options[objD.selectedIndex].value?objD.options[objD.selectedIndex].value:objD.options[objD.selectedIndex].innerText):undefined;};result=startsWith(filterRepeatsE((triggerE?triggerE:extractEventsE(objD,'click','keyup','change')).mapE(getter)),getter(),getter());break;case'select-multiple':getter=function(_){var res=[];for(var i=0;i<objD.options.length;i++){if(objD.options[i].selected){res.push(objD.options[i].value?objD.options[i].value:objD.options[i].innerText);}}
return res;};result=startsWith((triggerE?triggerE:extractEventsE(objD,'click','keyup','change')).mapE(getter),getter());break;case'text':case'textarea':case'hidden':case'password':result=startsWith(filterRepeatsE(extractDomFieldOnEventE(triggerE?triggerE:extractEventsE(objD,'click','keyup','change'),objD,'value'),objD.value),objD.value);break;case'button':result=startsWith(extractDomFieldOnEventE(triggerE?triggerE:extractEventsE(objD,'click','keyup','change'),objD,'value'),objD.value);break;case'radio':case'radio-group':var radiosAD=filter(function(elt){return(elt.type=='radio')&&(elt.getAttribute('name')==objD.name);},document.getElementsByTagName('input'));getter=objD.type=='radio'?function(_){return objD.checked;}:function(_){for(var i=0;i<radiosAD.length;i++){if(radiosAD[i].checked){return radiosAD[i].value;}}
return undefined;};var actualTriggerE=triggerE?triggerE:mergeE.apply(this,map(function(radio){return extractEventsE(radio,'click','keyup','change');},radiosAD));result=startsWith(filterRepeatsE(actualTriggerE.mapE(getter),getter()),getter());break;default:throw('extractValueStaticB: unknown value type "'+objD.type+'"');}
return result;};var extractValueB=function(domObj){if(domObj instanceof Behavior){return liftB(function(dom){return extractValueStaticB(dom);},domObj).switchB();}else{return extractValueStaticB(domObj);}};var $B=extractValueB;deepStaticUpdate=function(into,from,index){var fV=(from instanceof Behavior)?valueNow(from):from;if(typeof(fV)=='object'){for(var i in fV){if(!(Object.prototype)||!(Object.prototype[i])){deepStaticUpdate(index?into[index]:into,fV[i],i);}}}else{var old=into[index];into[index]=fV;}};deepDynamicUpdate=function(into,from,index){var fV=(from instanceof Behavior)?valueNow(from):from;if(typeof(fV)=='object'){if(from instanceof Behavior){throw'deepDynamicUpdate: dynamic collections not supported';}
for(var i in fV){if(!(Object.prototype)||!(Object.prototype[i])){deepDynamicUpdate(index?into[index]:into,fV[i],i);}}}else{if(from instanceof Behavior){createNode([changes(from)],function(p){if(index){var old=into[index];into[index]=p.value;}
else{into=p.value;}
return doNotPropagate;});}}};insertValue=function(val,domObj){var indices=slice(arguments,2);var parent=getMostDom(domObj,indices);deepStaticUpdate(parent,val,indices?indices[indices.length-1]:undefined);};insertValueE=function(triggerE,domObj){if(!(triggerE instanceof EventStream)){throw'insertValueE: expected Event as first arg';}
var indices=slice(arguments,2);var parent=getMostDom(domObj,indices);triggerE.mapE(function(v){deepStaticUpdate(parent,v,indices?indices[indices.length-1]:undefined);});};insertValueB=function(triggerB,domObj){var indices=slice(arguments,2);var parent=getMostDom(domObj,indices);deepStaticUpdate(parent,triggerB,indices?indices[indices.length-1]:undefined);deepDynamicUpdate(parent,triggerB,indices?indices[indices.length-1]:undefined);};insertDomE=function(triggerE,domObj){if(!(triggerE instanceof EventStream)){throw'insertDomE: expected Event as first arg';}
var objD=getObj(domObj);var res=triggerE.mapE(function(newObj){if(!((typeof(newObj)=='object')&&(newObj.nodeType==1))){newObj=module.SPAN({},newObj);}
swapDom(objD,newObj);objD=newObj;return newObj;});return res;};insertDomInternal=function(hookD,replaceWithD,optPosition){switch(optPosition)
{case undefined:case null:case'over':swapDom(hookD,replaceWithD);break;case'before':hookD.parentNode.insertBefore(replaceWithD,hookD);break;case'after':if(hookD.nextSibling){hookD.parentNode.insertBefore(replaceWithD,hookD.nextSibling);}else{hookD.parentNode.appendChild(replaceWithD);}
break;case'leftMost':if(hookD.parentNode.firstChild){hookD.parentNode.insertBefore(replaceWithD,hookD.parentNode.firstChild);}else{hookD.parentNode.appendChild(replaceWithD);}
break;case'rightMost':hookD.parentNode.appendChild(replaceWithD);break;case'beginning':if(hookD.firstChild){hookD.insertBefore(replaceWithD,hookD.firstChild);}else{hookD.appendChild(replaceWithD);}
break;case'end':hookD.appendChild(replaceWithD);break;default:throw('domInsert: unknown position: '+optPosition);}};insertDom=function(replaceWithD,hook,optPosition){insertDomInternal(getObj(hook),((typeof(replaceWithD)=='object')&&(replaceWithD.nodeType>0))?replaceWithD:document.createTextNode(replaceWithD),optPosition);};insertDomB=function(initTriggerB,optID,optPosition,unsafe){if(!(initTriggerB instanceof Behavior)){initTriggerB=constantB(initTriggerB);}
var triggerB=liftB(function(d){if(unsafe===true){var res=document.createElement('span');res.innerHTML=d;return res;}
else if((typeof(d)=='object')&&(d.nodeType>0)){return d;}else{var res=document.createElement('span');res.appendChild(document.createTextNode(d));return res;}},initTriggerB);var initD=valueNow(triggerB);if(!((typeof(initD)=='object')&&(initD.nodeType==1))){throw('insertDomB: initial value conversion failed: '+initD);}
insertDomInternal(optID===null||optID===undefined?getObj(initD.getAttribute('id')):getObj(optID),initD,optPosition);var resB=startsWith(insertDomE(changes(triggerB),initD),initD);return resB;};var extractIdB=function(id,start)
{return startsWith(createNode(start instanceof Behavior?[changes(start)]:[],function(p){p.value=getObj(id);return p;}),getObj(id));};var mouseE=function(elem){return extractEventE(elem,'mousemove').mapE(function(evt){if(evt.pageX|evt.pageY){return{left:evt.pageX,top:evt.pageY};}
else if(evt.clientX||evt.clientY){return{left:evt.clientX+document.body.scrollLeft,top:evt.clientY+document.body.scrollTop};}
else{return{left:0,top:0};}});};var mouseB=function(elem){return mouseE(elem).startsWith({left:0,top:0});}
var mouseLeftB=function(elem){return liftB(function(v){return v.left;},mouseB(elem));};var mouseTopB=function(elem){return mouseB(elem).liftB(function(v){return v.top;});};var clicksE=function(elem){return extractEventE(elem,'click');};var getURLParam=function(param){var lparam=param.toLowerCase();var aReturn=[];var strHref=window.location.href;var endstr=(strHref.indexOf('#')>-1)?strHref.indexOf('#'):strHref.length;if(strHref.indexOf("?")>-1){var strQueryString=strHref.substring(strHref.indexOf("?")+1,endstr);map(function(qp){var eq=qp.indexOf('=');var qname=qp.substr(0,eq+1).toLowerCase();if(qname==lparam+"=")aReturn.push(decodeURIComponent(qp.substr(eq+1)));},strQueryString.split("&"));}
if(aReturn.length==0)return undefined;else if(aReturn.length==1)return aReturn[0];else return aReturn;};var readCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var co=ca[i];while(co.charAt(0)==' '){co=co.substring(1,co.length);}
if(co.indexOf(nameEQ)===0){return co.substring(nameEQ.length,co.length);}}
return undefined;};var scriptCounter=0;var deleteScript=function(scriptID){var scriptD=getObj(scriptID);scriptD.parentNode.removeChild(scriptD);};var runScript=function(url,fn,param){var script=document.createElement("script");script.src=url;var scriptID='scriptFnRPC'+scriptCounter++;script.setAttribute('id',scriptID);document.getElementsByTagName("head").item(0).appendChild(script);var timer={};var check=function(){eval("try { if ("+param+"!== undefined) {var stat = "+param+";}} catch (e) {}");if(stat!==undefined){eval(param+" = undefined;");clearInterval(timer.timer);clearInterval(timer.timeout);if(fn instanceof Function){fn(stat);}
deleteScript(scriptID);}};timer.timer=setInterval(check,3500);timer.timeout=setTimeout(function(){try{clearInterval(timer.timer);}
catch(e){}},5000);};var evalForeignScriptValE=function(urlArgE){var result=receiverE();urlArgE.mapE(function(urlArg){runScript(urlArg.url,function(val){result.sendEvent(val);},urlArg.globalArg);});return result;};var ajaxRequest=function(method,url,body,async,useFlash,callback){var xhr;if(useFlash){xhr=new FlashXMLHttpRequest();xhr.onload=function(){callback(xhr);};}
else if(window.XMLHttpRequest&&!(window.ActiveXObject)){xhr=new window.XMLHttpRequest();xhr.onload=function(){callback(xhr);};}
else if(window.ActiveXObject){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}
catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP");}
xhr.onreadystatechange=function(){if(xhr.readyState==4){callback(xhr);}};};xhr.open(method,url,async);if(method=='POST'){xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
xhr.send(body);return xhr;};var encodeREST=function(obj){var str="";for(var field in obj){if(typeof(obj[field])!=='function'){if(str!=''){str+='&';}
str+=field+'='+encodeURIComponent(obj[field]);}}
return str;};var parseJSON=function(str){try{return!(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(str.replace(/"(\\.|[^"\\])*"/g,'')))&&eval('('+str+')');}catch(e){throw'cannot parse JSON string: '+e;}};var toJSONString=(function(){var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};var s={array:function(x){var a=['['],b,f,i,l=x.length,v;for(i=0;i<l;i+=1){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=='string'){if(b){a[a.length]=',';}
a[a.length]=v;b=true;}}}
a[a.length]=']';return a.join('');},'boolean':function(x){return String(x);},'null':function(x){return"null";},number:function(x){return isFinite(x)?String(x):'null';},object:function(x){if(x){if(x instanceof Array){return s.array(x);}
var a=['{'],b,f,i,v;for(i in x){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=='string'){if(b){a[a.length]=',';}
a.push(s.string(i),':',v);b=true;}}}
a[a.length]='}';return a.join('');}
return'null';},string:function(x){if(/["\\\x00-\x1f]/.test(x)){x=x.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c;}
c=b.charCodeAt();return'\\u00'+
Math.floor(c/16).toString(16)+
(c%16).toString(16);});}
return'"'+x+'"';}};return function(val){var f=s[typeof val];if(f){return f(val);}
else{return undefined}};})();var serverRequestE=function(useFlash,requestE){var responseE=receiverE();requestE.mapE(function(obj){var body='';var method='GET';var url=obj.url;var reqType=obj.request?obj.request:(obj.fields?'post':'get');if(obj.request=='get'){url+="?"+encodeREST(obj.fields);body='';method='GET';}else if(obj.request=='post'){body=toJSONString(obj.fields);method='POST';}else if(obj.request=='rawPost'){body=obj.body;method='POST';}
else if(obj.request=='rest'){body=encodeREST(obj.fields);method='POST';}
else{throw("Invalid request type: "+obj.request);}
var async=obj.async;var xhr;if(obj.response=='json'){xhr=ajaxRequest(method,url,body,async,useFlash,function(xhr){responseE.sendEvent(parseJSON(xhr.responseText));});}
else if(obj.response=='xml'){ajaxRequest(method,url,body,async,useFlash,function(xhr){responseE.sendEvent(xhr.responseXML);});}
else if(obj.response=='plain'||!obj.response){ajaxRequest(method,url,body,async,useFlash,function(xhr){responseE.sendEvent(xhr.responseText);});}
else{throw('Unknown response format: '+obj.response);}
return doNotPropagate;});return responseE;};var getWebServiceObjectE=function(requestE){return serverRequestE(false,requestE);};var getForeignWebServiceObjectE=function(requestE){return serverRequestE(true,requestE);};var cumulativeOffset=function(element){var valueT=0,valueL=0;do{valueT+=element.offsetTop||0;valueL+=element.offsetLeft||0;element=element.offsetParent;}while(element);return{left:valueL,top:valueT};};var mixedSwitchB=function(behaviorCreatorsB){var init=behaviorCreatorsB.valueNow();var prevSourceE=null;var resultE=internalE();var listenerE=createNode([changes(behaviorCreatorsB)],function(pulse){if(prevSourceE!=null){prevSourceE.removeListener(resultE);prevSourceE=null;}
if(pulse.value instanceof Behavior){prevSourceE=changes(pulse.value);prevSourceE.attachListener(resultE);return{stamp:pulse.stamp,value:pulse.value.valueNow()};}
else{return pulse;}});listenerE.attachListener(resultE);return resultE.startsWith(init instanceof Behavior?valueNow(init):init);};var compilerInsertDomB=function(mixedB,target){if(mixedB instanceof Behavior){insertDomB(mixedSwitchB(mixedB),target,"over");}
else{insertDomB(mixedB,target,"over");}};var compilerInsertValueB=function(mixedB,target,attrib){if(typeof(mixedB)=="object"){for(var ix in mixedB){if(Object.prototype&&Object.prototype[ix]){continue;}
if(mixedB[ix]instanceof Behavior){insertValueB(mixedSwitchB(mixedB[ix]),target,attrib,ix);}
else{insertValueB(constantB(mixedB[ix]),target,attrib,ix);}};}
else{insertValueB(mixedSwitchB(mixedB),target,attrib);}};var compilerLift=function(f){checkBehavior:{for(var i=0;i<arguments.length;i++){if(arguments[i]instanceof Behavior){break checkBehavior;}}
return f.apply(this,slice(arguments,1));}
var resultE=internalE();var r=liftB.apply(this,arguments);if(!(r instanceof Behavior)){return r;}
if(r.valueNow()instanceof EventStream){return r.valueNow();}
else{return mixedSwitchB(r);}};var compilerCall=function(f){return compilerLift.apply(this,arguments);};var compilerIf=function(test,cons,alt){if(test instanceof Behavior){return test.liftB(function(v){return v?cons:alt;}).switchB();}
else{return test?cons:alt;}};var unBehavior=function(recompute){return function(v){if(v instanceof Behavior){if(v.valueNow()instanceof Behavior){return unBehavior(recompute)(v.valueNow());}
else{v.changes().attachListener(recompute(v.changes()));return unBehavior()(v.valueNow());}}
else if(typeof v=='function'){return function(){var r=v.apply(this,arguments);return unBehavior(recompute)(r);}}
else{return v;};}};var compilerEventStreamArg=function(x){if(x instanceof Behavior){return compilerEventStreamArg(x.valueNow());}
else if(typeof(x)=="function"){return function(){return compilerEventStreamArg(x.apply(this,arguments));}}
else{return x;}};var map1=function(f,src){var dest=[];for(var i=0;i<src.length;i++){dest.push(f(src[i]));}
return dest;};var compilerUnbehavior=function(v){if(typeof v=='undefined'||v.nodeType>0||v==Date||v==Math||v==window){return v}
else if(typeof v=='function'){var f=function(){var originalArgs=slice(arguments,0);var srcs=[];var recompute=function(src){srcs.push(src);return recomputeE;};var resultE=internalE();var recomputeE=createNode([],function(send,_){map1(function(src){src.removeListener(recomputeE);},srcs);srcs=[];var args=map1(unBehavior(recompute),originalArgs);var r=v.apply(this,args);sendEvent(resultE,r);});return resultE.startsWith(v.apply(this,map1(unBehavior(recompute),originalArgs)));}
return f;}
else{return v;}};try
{if(constantB!==undefined)
this.constantB=constantB}
catch(_){;};try
{if(delayB!==undefined)
this.delayB=delayB}
catch(_){;};try
{if(calmB!==undefined)
this.calmB=calmB}
catch(_){;};try
{if(blindB!==undefined)
this.blindB=blindB}
catch(_){;};try
{if(valueNow!==undefined)
this.valueNow=valueNow}
catch(_){;};try
{if(switchB!==undefined)
this.switchB=switchB}
catch(_){;};try
{if(andB!==undefined)
this.andB=andB}
catch(_){;};try
{if(orB!==undefined)
this.orB=orB}
catch(_){;};try
{if(notB!==undefined)
this.notB=notB}
catch(_){;};try
{if(liftB!==undefined)
this.liftB=liftB}
catch(_){;};try
{if(condB!==undefined)
this.condB=condB}
catch(_){;};try
{if(ifB!==undefined)
this.ifB=ifB}
catch(_){;};try
{if(timerB!==undefined)
this.timerB=timerB}
catch(_){;};try
{if(disableTimer!==undefined)
this.disableTimer=disableTimer}
catch(_){;};try
{if(insertDomB!==undefined)
this.insertDomB=insertDomB}
catch(_){;};try
{if(insertDom!==undefined)
this.insertDom=insertDom}
catch(_){;};try
{if(mouseTopB!==undefined)
this.mouseTopB=mouseTopB}
catch(_){;};try
{if(mouseLeftB!==undefined)
this.mouseLeftB=mouseLeftB}
catch(_){;};try
{if(mouseB!==undefined)
this.mouseB=mouseB}
catch(_){;};try
{if(extractValueB!==undefined)
this.extractValueB=extractValueB}
catch(_){;};try
{if($B!==undefined)
this.$B=$B}
catch(_){;};try
{if(extractValueE!==undefined)
this.extractValueE=extractValueE}
catch(_){;};try
{if(extractEventE!==undefined)
this.extractEventE=extractEventE}
catch(_){;};try
{if($E!==undefined)
this.$E=$E}
catch(_){;};try
{if(clicksE!==undefined)
this.clicksE=clicksE}
catch(_){;};try
{if(timerE!==undefined)
this.timerE=timerE}
catch(_){;};try
{if(extractValueOnEventE!==undefined)
this.extractValueOnEventE=extractValueOnEventE}
catch(_){;};try
{if(extractIdB!==undefined)
this.extractIdB=extractIdB}
catch(_){;};try
{if(insertDomE!==undefined)
this.insertDomE=insertDomE}
catch(_){;};try
{if(insertValueE!==undefined)
this.insertValueE=insertValueE}
catch(_){;};try
{if(insertValueB!==undefined)
this.insertValueB=insertValueB}
catch(_){;};try
{if(tagRec!==undefined)
this.tagRec=tagRec}
catch(_){;};try
{if(getWebServiceObjectE!==undefined)
this.getWebServiceObjectE=getWebServiceObjectE}
catch(_){;};try
{if(getForeignWebServiceObjectE!==undefined)
this.getForeignWebServiceObjectE=getForeignWebServiceObjectE}
catch(_){;};try
{if(evalForeignScriptValE!==undefined)
this.evalForeignScriptValE=evalForeignScriptValE}
catch(_){;};try
{if(oneE!==undefined)
this.oneE=oneE}
catch(_){;};try
{if(zeroE!==undefined)
this.zeroE=zeroE}
catch(_){;};try
{if(mapE!==undefined)
this.mapE=mapE}
catch(_){;};try
{if(mergeE!==undefined)
this.mergeE=mergeE}
catch(_){;};try
{if(switchE!==undefined)
this.switchE=switchE}
catch(_){;};try
{if(filterE!==undefined)
this.filterE=filterE}
catch(_){;};try
{if(ifE!==undefined)
this.ifE=ifE}
catch(_){;};try
{if(recE!==undefined)
this.recE=recE}
catch(_){;};try
{if(constantE!==undefined)
this.constantE=constantE}
catch(_){;};try
{if(collectE!==undefined)
this.collectE=collectE}
catch(_){;};try
{if(andE!==undefined)
this.andE=andE}
catch(_){;};try
{if(orE!==undefined)
this.orE=orE}
catch(_){;};try
{if(notE!==undefined)
this.notE=notE}
catch(_){;};try
{if(filterRepeatsE!==undefined)
this.filterRepeatsE=filterRepeatsE}
catch(_){;};try
{if(receiverE!==undefined)
this.receiverE=receiverE}
catch(_){;};try
{if(sendEvent!==undefined)
this.sendEvent=sendEvent}
catch(_){;};try
{if(snapshotE!==undefined)
this.snapshotE=snapshotE}
catch(_){;};try
{if(onceE!==undefined)
this.onceE=onceE}
catch(_){;};try
{if(skipFirstE!==undefined)
this.skipFirstE=skipFirstE}
catch(_){;};try
{if(delayE!==undefined)
this.delayE=delayE}
catch(_){;};try
{if(blindE!==undefined)
this.blindE=blindE}
catch(_){;};try
{if(calmE!==undefined)
this.calmE=calmE}
catch(_){;};try
{if(startsWith!==undefined)
this.startsWith=startsWith}
catch(_){;};try
{if(changes!==undefined)
this.changes=changes}
catch(_){;};try
{if(getElementsByClass!==undefined)
this.getElementsByClass=getElementsByClass}
catch(_){;};try
{if(getObj!==undefined)
this.getObj=getObj}
catch(_){;};try
{if($!==undefined)
this.$=$}
catch(_){;};try
{if(readCookie!==undefined)
this.readCookie=readCookie}
catch(_){;};try
{if(swapDom!==undefined)
this.swapDom=swapDom}
catch(_){;};try
{if(getURLParam!==undefined)
this.getURLParam=getURLParam}
catch(_){;};try
{if(cumulativeOffset!==undefined)
this.cumulativeOffset=cumulativeOffset}
catch(_){;};try
{if(map!==undefined)
this.map=map}
catch(_){;};try
{if(A!==undefined)
this.A=A}
catch(_){;};try
{if(B!==undefined)
this.B=B}
catch(_){;};try
{if(BLOCKQUOTE!==undefined)
this.BLOCKQUOTE=BLOCKQUOTE}
catch(_){;};try
{if(BR!==undefined)
this.BR=BR}
catch(_){;};try
{if(BUTTON!==undefined)
this.BUTTON=BUTTON}
catch(_){;};try
{if(CANVAS!==undefined)
this.CANVAS=CANVAS}
catch(_){;};try
{if(DIV!==undefined)
this.DIV=DIV}
catch(_){;};try
{if(FIELDSET!==undefined)
this.FIELDSET=FIELDSET}
catch(_){;};try
{if(FORM!==undefined)
this.FORM=FORM}
catch(_){;};try
{if(FONT!==undefined)
this.FONT=FONT}
catch(_){;};try
{if(H1!==undefined)
this.H1=H1}
catch(_){;};try
{if(H2!==undefined)
this.H2=H2}
catch(_){;};try
{if(H3!==undefined)
this.H3=H3}
catch(_){;};try
{if(H4!==undefined)
this.H4=H4}
catch(_){;};try
{if(HR!==undefined)
this.HR=HR}
catch(_){;};try
{if(IMG!==undefined)
this.IMG=IMG}
catch(_){;};try
{if(IFRAME!==undefined)
this.IFRAME=IFRAME}
catch(_){;};try
{if(INPUT!==undefined)
this.INPUT=INPUT}
catch(_){;};try
{if(LABEL!==undefined)
this.LABEL=LABEL}
catch(_){;};try
{if(LEGEND!==undefined)
this.LEGEND=LEGEND}
catch(_){;};try
{if(LI!==undefined)
this.LI=LI}
catch(_){;};try
{if(OL!==undefined)
this.OL=OL}
catch(_){;};try
{if(OPTGROUP!==undefined)
this.OPTGROUP=OPTGROUP}
catch(_){;};try
{if(OPTION!==undefined)
this.OPTION=OPTION}
catch(_){;};try
{if(P!==undefined)
this.P=P}
catch(_){;};try
{if(PRE!==undefined)
this.PRE=PRE}
catch(_){;};try
{if(SELECT!==undefined)
this.SELECT=SELECT}
catch(_){;};try
{if(SPAN!==undefined)
this.SPAN=SPAN}
catch(_){;};try
{if(STRONG!==undefined)
this.STRONG=STRONG}
catch(_){;};try
{if(TABLE!==undefined)
this.TABLE=TABLE}
catch(_){;};try
{if(TBODY!==undefined)
this.TBODY=TBODY}
catch(_){;};try
{if(TD!==undefined)
this.TD=TD}
catch(_){;};try
{if(TEXTAREA!==undefined)
this.TEXTAREA=TEXTAREA}
catch(_){;};try
{if(TFOOT!==undefined)
this.TFOOT=TFOOT}
catch(_){;};try
{if(TH!==undefined)
this.TH=TH}
catch(_){;};try
{if(THEAD!==undefined)
this.THEAD=THEAD}
catch(_){;};try
{if(TR!==undefined)
this.TR=TR}
catch(_){;};try
{if(TT!==undefined)
this.TT=TT}
catch(_){;};try
{if(UL!==undefined)
this.UL=UL}
catch(_){;};try
{if(TEXT!==undefined)
this.TEXT=TEXT}
catch(_){;};try
{if(fold!==undefined)
this.fold=fold}
catch(_){;};try
{if(foldR!==undefined)
this.foldR=foldR}
catch(_){;};try
{if(map!==undefined)
this.map=map}
catch(_){;};try
{if(filter!==undefined)
this.filter=filter}
catch(_){;};try
{if(member!==undefined)
this.member=member}
catch(_){;};try
{if(slice!==undefined)
this.slice=slice}
catch(_){;};try
{if(forEach!==undefined)
this.forEach=forEach}
catch(_){;};try
{if(toJSONString!==undefined)
this.toJSONString=toJSONString}
catch(_){;};try
{if(compilerInsertDomB!==undefined)
this.compilerInsertDomB=compilerInsertDomB}
catch(_){;};try
{if(compilerInsertValueB!==undefined)
this.compilerInsertValueB=compilerInsertValueB}
catch(_){;};try
{if(compilerLift!==undefined)
this.compilerLift=compilerLift}
catch(_){;};try
{if(compilerCall!==undefined)
this.compilerCall=compilerCall}
catch(_){;};try
{if(compilerIf!==undefined)
this.compilerIf=compilerIf}
catch(_){;};try
{if(compilerUnbehavior!==undefined)
this.compilerUnbehavior=compilerUnbehavior}
catch(_){;};try
{if(compilerEventStreamArg!==undefined)
this.compilerEventStreamArg=compilerEventStreamArg}
catch(_){;};try
{if(Behavior!==undefined)
this.Behavior=Behavior}
catch(_){;};try
{if(EventStream!==undefined)
this.EventStream=EventStream}
catch(_){;};}).apply(impl,[]);this.constantB=impl.constantB;this.delayB=impl.delayB;this.calmB=impl.calmB;this.blindB=impl.blindB;this.valueNow=impl.valueNow;this.switchB=impl.switchB;this.andB=impl.andB;this.orB=impl.orB;this.notB=impl.notB;this.liftB=impl.liftB;this.condB=impl.condB;this.ifB=impl.ifB;this.timerB=impl.timerB;this.disableTimer=impl.disableTimer;this.insertDomB=impl.insertDomB;this.insertDom=impl.insertDom;this.mouseTopB=impl.mouseTopB;this.mouseLeftB=impl.mouseLeftB;this.mouseB=impl.mouseB;this.extractValueB=impl.extractValueB;this.$B=impl.$B;this.extractValueE=impl.extractValueE;this.extractEventE=impl.extractEventE;this.$E=impl.$E;this.clicksE=impl.clicksE;this.timerE=impl.timerE;this.extractValueOnEventE=impl.extractValueOnEventE;this.extractIdB=impl.extractIdB;this.insertDomE=impl.insertDomE;this.insertValueE=impl.insertValueE;this.insertValueB=impl.insertValueB;this.tagRec=impl.tagRec;this.getWebServiceObjectE=impl.getWebServiceObjectE;this.getForeignWebServiceObjectE=impl.getForeignWebServiceObjectE;this.evalForeignScriptValE=impl.evalForeignScriptValE;this.oneE=impl.oneE;this.zeroE=impl.zeroE;this.mapE=impl.mapE;this.mergeE=impl.mergeE;this.switchE=impl.switchE;this.filterE=impl.filterE;this.ifE=impl.ifE;this.recE=impl.recE;this.constantE=impl.constantE;this.collectE=impl.collectE;this.andE=impl.andE;this.orE=impl.orE;this.notE=impl.notE;this.filterRepeatsE=impl.filterRepeatsE;this.receiverE=impl.receiverE;this.sendEvent=impl.sendEvent;this.snapshotE=impl.snapshotE;this.onceE=impl.onceE;this.skipFirstE=impl.skipFirstE;this.delayE=impl.delayE;this.blindE=impl.blindE;this.calmE=impl.calmE;this.startsWith=impl.startsWith;this.changes=impl.changes;this.getElementsByClass=impl.getElementsByClass;this.getObj=impl.getObj;this.$=impl.$;this.readCookie=impl.readCookie;this.swapDom=impl.swapDom;this.getURLParam=impl.getURLParam;this.cumulativeOffset=impl.cumulativeOffset;this.map=impl.map;this.A=impl.A;this.B=impl.B;this.BLOCKQUOTE=impl.BLOCKQUOTE;this.BR=impl.BR;this.BUTTON=impl.BUTTON;this.CANVAS=impl.CANVAS;this.DIV=impl.DIV;this.FIELDSET=impl.FIELDSET;this.FORM=impl.FORM;this.FONT=impl.FONT;this.H1=impl.H1;this.H2=impl.H2;this.H3=impl.H3;this.H4=impl.H4;this.HR=impl.HR;this.IMG=impl.IMG;this.IFRAME=impl.IFRAME;this.INPUT=impl.INPUT;this.LABEL=impl.LABEL;this.LEGEND=impl.LEGEND;this.LI=impl.LI;this.OL=impl.OL;this.OPTGROUP=impl.OPTGROUP;this.OPTION=impl.OPTION;this.P=impl.P;this.PRE=impl.PRE;this.SELECT=impl.SELECT;this.SPAN=impl.SPAN;this.STRONG=impl.STRONG;this.TABLE=impl.TABLE;this.TBODY=impl.TBODY;this.TD=impl.TD;this.TEXTAREA=impl.TEXTAREA;this.TFOOT=impl.TFOOT;this.TH=impl.TH;this.THEAD=impl.THEAD;this.TR=impl.TR;this.TT=impl.TT;this.UL=impl.UL;this.TEXT=impl.TEXT;this.fold=impl.fold;this.foldR=impl.foldR;this.map=impl.map;this.filter=impl.filter;this.member=impl.member;this.slice=impl.slice;this.forEach=impl.forEach;this.toJSONString=impl.toJSONString;this.compilerInsertDomB=impl.compilerInsertDomB;this.compilerInsertValueB=impl.compilerInsertValueB;this.compilerLift=impl.compilerLift;this.compilerCall=impl.compilerCall;this.compilerIf=impl.compilerIf;this.compilerUnbehavior=impl.compilerUnbehavior;this.compilerEventStreamArg=impl.compilerEventStreamArg;this.Behavior=impl.Behavior;this.EventStream=impl.EventStream;window.flapjax={};for(var ix in impl)
window.flapjax[ix]=impl[ix];})();